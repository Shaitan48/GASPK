# Qt Client-Server Monitoring System

Этот проект представляет собой простую систему мониторинга, состоящую из сервера, клиента и агента.

## Структура проекта

*   **`src/client`**: Содержит исходный код для клиентского приложения.
    *   `main.cpp`: Точка входа в клиентское приложение.
    *   `Client.h`, `Client.cpp`: Класс клиента, отвечающий за взаимодействие с сервером.
    *   `qml/MainWindow.qml`: Файл QML для GUI клиента.
*   **`src/server`**: Содержит исходный код для серверного приложения.
    *   `main.cpp`: Точка входа в серверное приложение.
    *   `Server.h`, `Server.cpp`: Класс сервера, отвечающий за обработку запросов от клиентов и агентов.
    *   `config.json`: Файл конфигурации сервера.
*   **`src/agent`**: Содержит исходный код для агентского приложения.
    *   `main.cpp`: Точка входа в агентское приложение.
    *   `Agent.h`, `Agent.cpp`: Класс агента, отвечающий за сбор и отправку данных о системе на сервер.
*   **`src/common`**: Содержит общие классы, которые используются как сервером, так и клиентом, и агентом.
    *   `Trigger.h`, `Trigger.cpp`: Базовый класс для триггеров.
    *   `Operation.h`, `Operation.cpp`: Базовый класс для операций.
    *   `Task.h`, `Task.cpp`: Класс для управления задачами на сервере.
    *   `TriggerWatchDog.h`, `TriggerWatchDog.cpp`: Конкретная реализация триггера, отслеживающая файловую систему.
*   **`CMakeLists.txt`**: Файл конфигурации CMake для сборки проекта.

## Как собрать и запустить

1.  **Установите необходимые зависимости:**
    *   Qt 6 (Core, Quick, Network)
    *   CMake

2.  **Соберите проект:**

    ```bash
    mkdir build
    cd build
    cmake ..
    cmake --build .
    ```

3.  **Запустите приложения:**

    *   **Сервер:** `./Server/Server.exe` (или `./Server` в Linux/macOS)
    *   **Клиент:** `./Client/Client.exe` (или `./Client` в Linux/macOS)
    *   **Агент:** `./Agent/Agent.exe` (или `./Agent` в Linux/macOS). Агент принимает параметры командной строки:
        *   `-s` или `--server`: URL сервера (по умолчанию `http://localhost:1234/system`).
        *   `-i` или `--interval`: Интервал отправки данных в миллисекундах (по умолчанию 5000).
        
    Пример запуска агента с другими параметрами:
    `./Agent/Agent.exe -s http://localhost:8080/system -i 10000`

4. **Конфигурация сервера**
    Для сервера используется файл `config.json`, который должен лежать в папке с исполняемым файлом. В файле может содержаться объект `server` с полем `port`, которое отвечает за порт сервера.

    Пример `config.json`:
    ```json
        {
            "server": {
                "port": 1234
            }
        }
    ```

## Функциональность

*   **Сервер:**
    *   Принимает подключения от клиентов и агентов.
    *   Обрабатывает GET и POST запросы.
    *   Возвращает сообщения и информацию о системе в формате JSON.
    *   Выводит информацию в консоль, включая дату и время.
    *   Загружает порт сервера из файла конфигурации `config.json`.
    *   Имеет базовую систему задач.
*   **Клиент:**
    *   Подключается к серверу.
    *   Отправляет сообщения на сервер через TCP сокет.
    *   Отправляет информацию о имени хоста и имени пользователя через POST запрос на `/system`.
    *   Выводит ответ от сервера.
*   **Агент:**
    *   Собирает данные о состоянии системы (свободное место на дисках, список запущенных процессов, появление файлов).
    *   Периодически отправляет данные на сервер через HTTP POST запрос на `/system`.
    *   Принимает параметры командной строки: URL сервера и интервал отправки данных.
*   **Общие классы:**
    *   `Trigger`, `Operation`, `Task`: Базовые классы для управления автоматизированными задачами на сервере.
    *   `TriggerWatchDog`: Пример реализации триггера, отслеживающего появление файлов по маске.

## Дальнейшие планы

*   Добавить полноценную систему логирования на сервере.
*   Реализовать конкретные операции для задач.
*   Добавить UI для управления задачами на сервере.
*   Улучшить HTTP парсинг на сервере.
